{% extends "base.html" %}
{% load widget_tweaks %}
{%block section_one%}
		<div class="container 100%">
		<div class="row 200%">
			<div class="6u 12u$(medium)">
				{%if user.is_authenticated %}
				<header class="major">
					<h2>Currently Running/Ready Workflows</h2>
					<p>For user - {{user.username}} </p>
				</header>
			</div>
			<div class="6u$ 12u$(medium)">
				<table border="1">
		      <thead>
		        <tr>
		          <th>Name</th>
		          <th> Description </th> 
		          <th>State</th>
		          <th>Current Tasks</th>
		          <th>Action</th>
		        </tr>
		      </thead>
		      <tbody>
		        {% for workflow_exec in running %}
		          <tr>
		            <td> {{ workflow_exec.ufo.workflow.name }}</td>
		            <td> {{ workflow_exec.ufo.workflow.description }}</td>
		            <td> {{ states|get_item:workflow_exec.state }} </td>
		            <td> {{ workflow_exec.current_tasks }} </td>
		            <td> Proceed </td>
		          </tr>
		        {% endfor %}
		      </tbody>
		      <tbody>
			      {% for workflow in ready %}
			          <tr>
			            <td> {{ workflow.name }}</td>
			            <td> {{ workflow.description }}</td>
			            <td> Ready </td>
			            <td> Start </td>
			            <td><button type="button" class="btn btn-default"><a href="{% url 'executor:start_workflow' workflow.id %}" style="color: white">Initiate</a></button> </td>
			          </tr>
			        {% endfor %}
		       </tbody>
		    </table>
		    {% endif %}
		    {% if not user.is_authenticated %}
		    	<header class="major">
					<h2>Login required</h2>
					<p> Please login to see the tasks assigned to you and workflows you can start </p>
				</header>
		    {% endif %}
			</div>
		</div>
	</div>
{% endblock section_one %}